---
title: 'Video Cloud SSAI 廣告配置 API' 
description:在本主題中，您將學習如何使用服務器端廣告插入 (SSAI) API 來創建和管理廣告配置。
parent: Video-On-Demand
---
 <h1>此頁面已移動 - 您將被定向到<a href="https://apis.support.brightcove.com/ssai/getting-started/video-cloud-ssai-ad-config-api.html">新地點</a>在 3 秒內。請更新您的書籤！</h1>
<script type="text/javascript">
var t = setTimeout(function() { window.location.href = 'https://apis.support.brightcove.com/ssai/getting-started/video-cloud-ssai-ad-config-api.html'; } , 3000);
</script>
<h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section id="top" class="bcls-section">
<p>廣告組態可定義 SSAI 播放的各個層面，包括廣告通話、信標和其他組態選項。一個帳戶可以有多個配置，目前的配置無法在帳戶之間共享。</p>

<aside class="bcls-aside bcls-aside--tip">您可以從 Video Cloud Studio 輕鬆創建、列出和刪除廣告配置。有關詳細信息，請參閱<a href="https://studio.support.brightcove.com/admin/configuring-server-side-ad-settings.html">配置服務器端廣告設置</a>文檔。</aside><aside class="bcls-aside bcls-aside--information">筆記：
<ul>
	<li>要使用SSAI，您的視頻雲帳戶需要配置為<a href="https://studio.support.brightcove.com/general/overview-dynamic-delivery.html">動態投放</a>並啟用了SSAI。請連絡您的客戶經理，開始使用此功能。</li>
	<li>SSAI 可與隨選視訊 (VOD) 搭配使用，並支援即時播放。</li>
	<li>有關限制的列表，請參見<a href="/getting-started/video-cloud-ssai-overview.html#Limitations">SSAI概述</a>文檔。</li>
</ul>
</aside>
</section>

<section class="bcls-section">
<h2 id="General_information">一般信息</h2>

<p>以下信息與所有SSAI API請求有關。</p>

<h3>基本網址</h3>

<p>SSAI API的基本URL為：</p>

<pre>
<code class="language-http" translate="No">https://ssai.api.brightcove.com/v1</code></pre>

<h4>帳戶路徑</h4>

<p>在任何情況下，都將請求特定的視頻雲帳戶。因此，您將始終添加該詞<code translate="No">accounts</code>然後是您的帳戶ID和基本URL：</p>

<pre>
<code class="language-http" translate="No">https://ssai.api.brightcove.com/v1<strong>/accounts/</strong><span class="bcls-input">your account id</span></code></pre>

<h3>驗證</h3>

<p>對請求的身份驗證需要一個Authorization標頭：</p>

<pre>
<code class="language-http" translate="No">Authorization: Bearer <span class="bcls-input">your access token</span></code></pre>

<p>這<code translate="No">access_token</code>是一個臨時的 OAuth2 訪問令牌，必須從Brightcove OAuth服務。有關如何獲取客戶端憑據以及如何使用它們來檢索訪問令牌的詳細信息，請參閱<a href="https://apis.support.brightcove.com/oauth/getting-started/overview-oauth-api-v4.html">Brightcove OAuth概述</a>。</p>

<h3>作業</h3>

<p>當您請求客戶憑據時，您將需要指定所需的帳戶訪問或操作類型。以下是SSAI API當前支持的操作的列表：</p>

<ul>
	<li>SSAI數據：
	<p><code translate="No">video-cloud/ssai/read</code><br />
	<code translate="No">video-cloud/ssai/all</code></p>
	</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Manage_ad_configurations">管理廣告配置</h2>

<p>該API支持以下GET和PUT請求：</p>

<ul>
	<li><a href="#List_ad_configurations">列出廣告配置</a></li>
	<li><a href="#Create_an_ad_configuration">創建廣告配置</a></li>
	<li><a href="#Get_ad_configuration_details">獲取廣告配置詳細信息</a></li>
	<li><a href="#Update_an_ad_configuration">更新廣告配置</a></li>
</ul>

<h3 id="List_ad_configurations">列出廣告配置</h3>

<p>列出為帳戶定義的廣告配置。</p>

<table class="bcls-table">
	<tbody class="bcls-table__body">
		<tr>
			<th>方法</th>
			<td>得到</td>
		</tr>
		<tr>
			<th>網址</th>
			<td>https://ssai.api.brightcove.com/v1/accounts/ <span class="bcls-input">您的帳號</span> / ssai_configs</td>
		</tr>
		<tr>
			<th rowspan="2">標頭</th>
			<td>授權：持票人<span class="bcls-input">您的訪問令牌</span></td>
		</tr>
		<tr>
			<td>內容類型：application / json</td>
		</tr>
	</tbody>
</table>

<p>樣本回复：</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{% raw %}[
  {
    "name": "VMAP Ad Server",
    "vmap_response_namespace": "bc",
    "config_id": "2ecc6beb-d6a4-4deb-a78e-37ac27e0f883",
    "account_id": "57838016001",
    "created_timestamp": "2017-07-24T19:28:34.976878586Z",
    "updated_timestamp": "2017-07-24T19:28:34.976878586Z",
    "ad_config": {
      "expected_ad_response": "dfp_ad_rules",
      "disable_server_beacons": false,
      "template_url": {
          "template": "http://solutions.brightcove.com/bcls/ads/simple-ad-rules?ip={{ system.ip_address }}&amp;vid={{ metadata.video_id }}&amp;ppid={{ system.unique_user_id }}&amp;p_vmap={{ url.p_vmap }}"
      }
    }
  }
]{% endraw %}</code></pre>

<h3 id="Create_an_ad_configuration">建立廣告組態</h3>

<p>為帳戶創建廣告配置。</p>

<table class="bcls-table">
	<tbody class="bcls-table__body">
		<tr>
			<th>方法</th>
			<td>崗位</td>
		</tr>
		<tr>
			<th>網址</th>
			<td>https://ssai.api.brightcove.com/v1/accounts/ <span class="bcls-input">您的帳號</span> / ssai_configs</td>
		</tr>
		<tr>
			<th rowspan="2">標頭</th>
			<td>授權：持票人<span class="bcls-input">您的訪問令牌</span></td>
		</tr>
		<tr>
			<td>內容類型：application / json</td>
		</tr>
	</tbody>
</table>

<p>樣品體：</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{% raw %}{
  "name": "VMAP Ad Server",
  "vmap_response_namespace": "bc",
  "ad_config": {
  	"expected_ad_response": "vast_3_0",
  	"disable_server_beacons": false,
    "round_up_cue_points": false,
  	"template_url": {
  		"template": "http://solutions.brightcove.com/bcls/ads/simple-ad-rules?ip={{ system.ip_address }}&amp;vid={{ metadata.video_id }}&amp;ppid={{ system.unique_user_id }}&amp;p_vmap={{ url.p_vmap }}"
  	}
  },
  "discontinuities": {
    "hls": [ "*" ]
  }
}{% endraw %}</code></pre>

<h3 id="Get_ad_configuration_details">獲取廣告配置詳細信息</h3>

<p>對於帳戶，請按config ID獲取廣告配置詳細信息。</p>

<table class="bcls-table">
	<tbody class="bcls-table__body">
		<tr>
			<th>方法</th>
			<td>得到</td>
		</tr>
		<tr>
			<th>網址</th>
			<td>https://ssai.api.brightcove.com/v1/accounts/ <span class="bcls-input">您的帳號</span> / ssai_configs / <span class="bcls-input">您的廣告配置ID</span></td>
		</tr>
		<tr>
			<th rowspan="2">標頭</th>
			<td>授權：持票人<span class="bcls-input">您的訪問令牌</span></td>
		</tr>
		<tr>
			<td>內容類型：application / json</td>
		</tr>
	</tbody>
</table>

<p>樣本回复：</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{% raw %}{
  "name": "VMAP Ad Server",
  "vmap_response_namespace": "bc",
  "config_id": "2ecc6beb-d6a4-4deb-a78e-37ac27e0f883",
  "account_id": "57838016001",
  "created_timestamp": "2017-07-24T19:28:34.976878586Z",
  "updated_timestamp": "2017-07-24T19:28:34.976878586Z",
  "ad_config": {
    "expected_ad_response": "dfp_ad_rules",
    "disable_server_beacons": false,
    "template_url": {
        "template": "http://solutions.brightcove.com/bcls/ads/simple-ad-rules?ip={{ system.ip_address }}&amp;vid={{ metadata.video_id }}&amp;ppid={{ system.unique_user_id }}&amp;p_vmap={{ url.p_vmap }}"
    }
  },
  "beacon_templates": [
      {
        "type": "content_start",
        "template_url": {
          "template": "https://myserver.com/beaconRX/{{metadata.video_id}}/load?position=load&amp;sid={{system.xfp.unique_user_id}}&amp;jid={{metadata.video_id}}&amp;rnd32={{sytem.random_number_32}}&amp;bid={{system.uuid}}&amp;t={{system.timestamp_utc}}&amp;ua={{system.user_agent}}&amp;ip={{system.ip_address}}&amp;ref={{system.referer}}"
        }
      },
      {
        "type": "content_midpoint",
        "template_url": {
          "template": "https://myserver.com/beaconRX/{{metadata.video_id}}/load?position=load&amp;sid={{system.xfp.unique_user_id}}&amp;jid={{metadata.video_id}}&amp;rnd32={{sytem.random_number_32}}&amp;bid={{system.uuid}}&amp;t={{system.timestamp_utc}}&amp;ua={{system.user_agent}}&amp;ip={{system.ip_address}}&amp;ref={{system.referer}}"
        }
      },
      {
        "type": "ad_start",
        "template_url": {
          "template": "https://myserver.com/beaconRX/{{metadata.video_id}}/load?position=load&amp;sid={{system.xfp.unique_user_id}}&amp;jid={{metadata.video_id}}&amp;rnd32={{sytem.random_number_32}}&amp;bid={{system.uuid}}&amp;t={{system.timestamp_utc}}&amp;ua={{system.user_agent}}&amp;ip={{system.ip_address}}&amp;ref={{system.referer}}"
        }
      },
      {
        "type": "content_complete",
        "template_url": {
          "template": "https://myserver.com/beaconRX/{{metadata.video_id}}/load?position=load&amp;sid={{system.xfp.unique_user_id}}&amp;jid={{metadata.video_id}}&amp;rnd32={{sytem.random_number_32}}&amp;bid={{system.uuid}}&amp;t={{system.timestamp_utc}}&amp;ua={{system.user_agent}}&amp;ip={{system.ip_address}}&amp;ref={{system.referer}}"
        }
      }
    ],
    "discontinuities": {
      "dash": [
        "*"
      ],
      "hls": [
        "*"
      ]
    },
    "extend_beacon_guard_ttl": true
  }
}{% endraw %}</code></pre>

<h3 id="Update_an_ad_configuration">更新廣告配置</h3>

<p>通過配置ID更新廣告配置。</p>

<table class="bcls-table">
	<tbody class="bcls-table__body">
		<tr>
			<th>方法</th>
			<td>放</td>
		</tr>
		<tr>
			<th>網址</th>
			<td>https://ssai.api.brightcove.com/v1/accounts/ <span class="bcls-input">您的帳號</span> / ssai_configs / <span class="bcls-input">您的廣告配置ID</span></td>
		</tr>
		<tr>
			<th rowspan="2">標頭</th>
			<td>授權：持票人<span class="bcls-input">您的訪問令牌</span></td>
		</tr>
		<tr>
			<td>內容類型：application / json</td>
		</tr>
		<tr>
			<th>樣品體</th>
			<td>
			<pre>
<code class="language-json" translate="No">{
    "name": "VMAP Ad Server - updated"
}</code></pre>
			</td>
		</tr>
	</tbody>
</table>

<p>樣本回复：</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{% raw %}{
  "name": "VMAP Ad Server - updated",
  "vmap_response_namespace": "bc",
  "config_id": "2ecc6beb-d6a4-4deb-a78e-37ac27e0f883",
  "account_id": "57838016001",
  "created_timestamp": "2017-07-24T19:28:34.976878586Z",
  "updated_timestamp": "2017-07-24T19:28:34.976878586Z",
  "ad_config": {
    "expected_ad_response": "dfp_ad_rules",
    "disable_server_beacons": false,
    "template_url": {
      "template": "http://solutions.brightcove.com/bcls/ads/simple-ad-rules?ip={{ system.ip_address }}&amp;vid={{ metadata.video_id }}&amp;ppid={{ system.unique_user_id }}&amp;p_vmap={{ url.p_vmap }}"
    }
  }
}{% endraw %}</code></pre>
</section>

<section class="bcls-section">
<h2 id="Configuration_field_details">配置字段詳細信息</h2>

<p>下表定義了在請求的正文部分中使用的廣告配置字段。</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>欄位</th>
			<th>類型</th>
			<th>描述</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">name</code></td>
			<td>字串</td>
			<td>易讀的名稱</td>
		</tr>
		<tr>
			<td><code translate="No">vmap_response_namespace</code></td>
			<td>字串</td>
			<td>調整VMAP輸出以使用舊的Unicorn Once命名空間格式或使用新的Brightcove命名空間格式。<br />
			<br />
			價值觀：<code translate="No">uo</code> , <code translate="No">bc</code>默認：<code translate="No">bc</code></td>
		</tr>
		<tr>
			<td><code translate="No">description</code></td>
			<td>字串</td>
			<td>可讀的描述</td>
		</tr>
		<tr>
			<td><code translate="No">ad_config.expected_ad_response</code></td>
			<td>字串</td>
			<td>使用哪種技術來解析響應。 <sup><a href="#n1">[1]</a></sup><br />
			<br />
			值：
			<ul>
				<li><code translate="No">dfp_ad_rules</code></li>
				<li><code translate="No">dfp_vmap</code></li>
				<li><code translate="No">smart_xml</code></li>
				<li><code translate="No">vast_3_0</code></li>
			</ul>
			</td>
		</tr>
		<tr>
			<td><code translate="No">ad_config.disable_server_beacons</code></td>
			<td>布林</td>
			<td>標記是否禁用廣告展示/信標的服務器端觸發<br />
			<br />
			當設置為<code translate="No">true</code> , SSAI 不會在服務器端觸發任何信標，並將在 VMAP 輸出中包含所有信標<br />
			<br />
			當設置為<code translate="No">false</code> , SSAI 將觸發它能夠在服務器端發送的信標，並在 VMAP 輸出中包含任何它無法發送的信標</td>
		</tr>
		<tr>
			<td><code translate="No">ad_config.round_up_cue_points</code></td>
			<td>布林</td>
			<td>標記在選擇附近位置插入廣告時是否舍入到下一個關鍵幀。<br />
			<br />
			默認：<code translate="No">false</code>，它選擇最接近所需廣告位置的關鍵幀。</td>
		</tr>
		<tr>
			<td><code translate="No">ad_config.template_url.template</code></td>
			<td>字串</td>
			<td>廣告代碼模板。可用變量將在後面的部分中介紹。</td>
		</tr>
		<tr>
			<td><code translate="No">ad_config.template_url.defaults</code></td>
			<td>物件</td>
			<td>String到String的映射，定義了在未提供url參數的情況下使用的默認值。<br />
			<br />
			可以是文字<code translate="No">{ "url.foo": "SomeString" }</code><br />
			<br />
			或者引用另一個變量<code translate="No">{% raw %}{ "url.foo": "{{ metadata.title_id }}" }{% endraw %}</code></td>
		</tr>
		<tr>
			<td><code translate="No">discontinuities.dash</code> <sup><a href="#n2">[2]</a></sup></td>
			<td>[]String</td>
			<td>控制傳遞多個時期破折號清單的破折號的版本。<br />
			<br />
			設置<code translate="No">["*"]</code>為所有版本提供多期破折號<br />
			<br />
			永遠的空列表<br />
			<br />
			例子：<code translate="No">["live-timeline"]</code>為實時時間線提供服務，但不適用於 hbbtv</td>
		</tr>
		<tr>
			<td><code translate="No">discontinuities.hls</code> <sup><a href="#n2">[2]</a></sup></td>
			<td>[]String</td>
			<td>控制不連續交付的hls版本。<br />
			<br />
			設置<code translate="No">["*"]</code>在所有版本的 HLS 中以不連續方式交付<br />
			<br />
			永遠的空列表<br />
			<br />
			例子：<code translate="No">["v4","v5"]</code>為 v4 和 v5 提供，但不為 v3 提供</td>
		</tr>
		<tr>
			<td><code translate="No">beacon_templates</code></td>
			<td>陣列</td>
			<td>要觸發的信標數組（例如：第3方信標）</td>
		</tr>
		<tr>
			<td><code translate="No">beacon_templates[].type</code></td>
			<td>字串</td>
			<td>
			<p>發射的信標類型。值：</p>

			<ul>
				<li><code translate="No">content_start</code></li>
				<li><code translate="No">content_first_quartile</code></li>
				<li><code translate="No">content_midpoint</code></li>
				<li><code translate="No">content_third_quartile</code></li>
				<li><code translate="No">content_complete</code></li>
				<li><code translate="No">content_quartiles</code></li>
				<li><code translate="No">content_interval</code></li>
				<li><code translate="No">ad_start</code></li>
				<li><code translate="No">ad_first_quartile</code></li>
				<li><code translate="No">ad_midpoint</code></li>
				<li><code translate="No">ad_third_quartile</code></li>
				<li><code translate="No">ad_complete</code></li>
				<li><code translate="No">ad_quartiles</code></li>
				<li><code translate="No">ad_break_start</code></li>
				<li><code translate="No">ad_break_end</code></li>
				<li><code translate="No">segment_start</code></li>
				<li><code translate="No">segment_end</code></li>
				<li><code translate="No">on_load</code></li>
			</ul>
			</td>
		</tr>
		<tr>
			<td><code translate="No">beacon_templates[].template_url.template</code></td>
			<td>字串</td>
			<td>信標網址模板</td>
		</tr>
		<tr>
			<td><code translate="No">extend_beacon_guard_ttl</code></td>
			<td>布林</td>
			<td>將信標保護TTL的長度（生存時間）設置為內容會話TTL的長度。否則，默認值為1分鐘。</td>
		</tr>
	</tbody>
</table>

<aside class="bcls-aside bcls-aside--information">
<p>以下註釋指的是上表中的字段。</p>

<p id="n1"><sup>[1]</sup> 當。。。的時候<code translate="No">expected_ad_response</code>被設定為<code translate="No">vast_3_0</code> , SSAI 對 Video Cloud 中定義的每個廣告提示點進行一次 VAST 調用。對於VMAP和廣告規則，SSAI根據初始廣告響應中定義的廣告間隔發出請求。</p>

<p id="n2"><sup>[2]</sup> 不連續標記表示內容視頻和廣告片段之間的幀速率編碼發生變化。他們告訴系統重建渲染鏈。對於可擴展的SSAI，視頻播放器需要能夠播放帶有不連續標籤和包含多個週期的MPEG DASH的HLS。</p>
</aside>
</section>

<section class="bcls-section">
<h2 id="Ad_variables">廣告變數</h2>

<p>中的變量<strong>模板網址</strong>用雙大括號（<code translate="No">{% raw %}{{ … }}{% endraw %}</code>），並在變量路徑前後添加可選的空格。所有變量都以三個名稱空間之一作為前綴：</p>

<ul>
	<li><a href="#System_variables">系統</a></li>
	<li><a href="#URL_variables">網址</a></li>
	<li><a href="#Metadata_variables">元數據</a></li>
</ul>

<h3 id="System_variables">系統變量</h3>

<p>系統變量由SSAI系統提供，可以是有關最終用戶或輔助變量的信息，以生成隨機值。將值插入URL模板之前，必須先對其進行URI編碼。</p>

<p>系統變量標識為：<code translate="No">{% raw %}{{system.*}}{% endraw %}</code></p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>欄位</th>
			<th>描述</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">ip_address</code></td>
			<td>最終用戶的IP地址</td>
		</tr>
		<tr>
			<td><code translate="No">random_number_32</code></td>
			<td>隨機32位整數</td>
		</tr>
		<tr>
			<td><code translate="No">random_guid</code></td>
			<td>隨機UUID</td>
		</tr>
		<tr>
			<td><code translate="No">referer</code></td>
			<td>最終用戶的引薦來源標頭值</td>
		</tr>
		<tr>
			<td><code translate="No">timestamp_utc</code></td>
			<td>當前時間作為Unix時間戳</td>
		</tr>
		<tr>
			<td><code translate="No">unique_user_id</code></td>
			<td>MD5（IP地址+用戶代理）</td>
		</tr>
		<tr>
			<td><code translate="No">unix_timestamp</code></td>
			<td>當前時間（Unix時間戳）（秒）</td>
		</tr>
		<tr>
			<td><code translate="No">user_agent</code></td>
			<td>最終用戶的User-Agent標頭值</td>
		</tr>
		<tr>
			<td><code translate="No">uuid</code></td>
			<td>隨機uuid</td>
		</tr>
		<tr>
			<td><code translate="No">x_forwarded_for</code></td>
			<td>最終用戶的X-Forwarded-For標頭值</td>
		</tr>
		<tr>
			<td><code translate="No">xfp.correlator</code></td>
			<td>隨機64位整數</td>
		</tr>
		<tr>
			<td><code translate="No">xfp.ip_address</code></td>
			<td>最終用戶的IP地址</td>
		</tr>
		<tr>
			<td><code translate="No">xfp.unique_user_id</code></td>
			<td>MD5（IP地址+用戶代理）</td>
		</tr>
		<tr>
			<td><code translate="No">xfp.scor</code></td>
			<td>隨機64位整數</td>
		</tr>
	</tbody>
</table>

<h3 id="URL_variables">URL變量</h3>

<p>入口點VMAP /清單上提供的查詢參數可在<code translate="No">url</code>命名空間。與其他命名空間下的變量不同，這些參數在插入模板時不會進行url編碼。如果需要對變量值進行網址編碼，然後轉到廣告提供商，則必須在入口點網址上對它們進行雙網址編碼。</p>

<p>URL變量標識為：<code translate="No">{% raw %}{{url.*}}{% endraw %}</code></p>

<h3 id="Metadata_variables">元數據變量</h3>

<p>元數據變量是描述內容視頻的變量，它們來自視頻雲和動態交付數據源。在將值插入URL模板之前，已對這些值進行了URL編碼。</p>

<p>元數據變量被標識為：<code translate="No">{% raw %}{{metadata.*}}{% endraw %}</code></p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>欄位</th>
			<th>描述</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">ad_keys</code></td>
			<td>可在Video Cloud Studio媒體模塊中添加和編輯的自由格式文本字符串</td>
		</tr>
		<tr>
			<td><code translate="No">{% raw %}custom_fields.{field_name}{% endraw %}</code></td>
			<td>Video Cloud自定義字段</td>
		</tr>
		<tr>
			<td><code translate="No">long_description</code></td>
			<td>視頻雲詳細說明</td>
		</tr>
		<tr>
			<td><code translate="No">name</code></td>
			<td>視頻雲視頻名稱</td>
		</tr>
		<tr>
			<td><code translate="No">reference_id</code></td>
			<td>視頻雲參考ID</td>
		</tr>
		<tr>
			<td><code translate="No">tags</code></td>
			<td>視頻的視頻雲標籤的逗號分隔列表</td>
		</tr>
		<tr>
			<td><code translate="No">title.duration</code></td>
			<td>內容的持續時間（以秒為單位）</td>
		</tr>
		<tr>
			<td><code translate="No">title.id</code></td>
			<td>動態投放標題ID</td>
		</tr>
		<tr>
			<td><code translate="No">title.name</code></td>
			<td>動態投放標題名稱</td>
		</tr>
		<tr>
			<td><code translate="No">video_id</code></td>
			<td>視頻雲視頻ID</td>
		</tr>
		<tr>
			<td colspan="2"><em>其他視頻雲鍵/值對也將在此處</em></td>
		</tr>
	</tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="Entrypoint_URL_parameters">入口點URL參數</h2>

<p>可以將少量查詢參數添加到SSAI入口點URL（VMAP或清單）中，以調整某些行為：</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th width="25%">範圍</th>
			<th>描述</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">?rule=sd-only</code></td>
			<td>篩選出高度小於“帳戶配置"中設置的閾值的任何視頻解譯</td>
		</tr>
		<tr>
			<td><code translate="No">?rule=discos-enabled</code></td>
			<td>在Dash中的HLS和MultiPeriods中啟用不連續播放。優先於“播放配置"中的“不連續性"設置</td>
		</tr>
		<tr>
			<td><code translate="No">?rule=discos-disabled</code></td>
			<td>在Dash中的HLS和MultiPeriods中禁用具有間斷性的播放。優先於“播放配置"中的“不連續性"設置</td>
		</tr>
	</tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="Configuration_notes">配置說明</h2>

<ol>
	<li>不得使用SSAI完成預加載廣告。這樣做的原因是，如果您預加載，播放器將在播放視頻之前報告廣告展示次數，並可能報告第一個四分位數信標。這可能會導致廣告分析不准確。如果您在Studio中配置SSAI，則會自動完成，但是如果碰巧手動設置SSAI，則需要注意此問題。</li>
	<li>如果網絡播放器正在使用SSAI，而這樣做的動機之一就是解決廣告攔截器，則應使用服務器端信標。不應使用客戶端信標，因為它們會被阻止。</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Client_side_macros">客戶端宏</h2>

<p>使用<code translate="No">page</code>要使用客戶端廣告宏時的前綴。這些宏使您可以在VMAP和服務器URL中使用變量。有關廣告宏的詳細信息，請參見<a href="https://player.support.brightcove.com/plugins/advertising-ima3-plugin.html#Ad_macros_and_the_serverUrl">廣告宏和serverURL</a>“帶有IMA3插件"廣告的“廣告"部分。</p>
<!-- <p>
              When you prefix an Ad variable with , then a client-side macro will be appended to the end of the VMAP and SRC fields in the catalog response, when SSAI is being used. Then, the Brightcove player will run those strings through the client-side macro replacement logic.
            </p> -->

<p>客戶端宏的前綴為：<code translate="No">{% raw %}{{page.*}}{% endraw %}</code></p>

<p>例如，添加<code translate="No">document.referrer</code>和一個<code translate="No">pageVariable</code> DOM窗口變量，您可以給它們加上前綴<code translate="No">page</code>在廣告模板中，如下所示：</p>

<pre>
<code class="language-html" translate="No">{% raw %}https://adserver.com/{{page.document.referrer}}/{{page.pageVariable.whateverIwant}}{% endraw %}</code></pre>

<p>播放API返回<code translate="No">document.referrer</code>和<code translate="No">pageVariable.whateverIwant</code>附加到VMAP和SRC URL。然後，在發送請求之前，Brightcove播放器將運行其客戶端宏替換邏輯以替換適當的值：</p>

<pre>
<code class="language-html" translate="No">{% raw %}https://bolt-prefix/blah.vmap?document.referrer={document.referrer}&amp;pageVariable.whateverIwant={pageVariable.whateverIwant}{% endraw %}</code></pre>
</section>

<section class="bcls-section">
<h2 id="Ad_error_beacons">廣告錯誤信標</h2>

<p>使用SSAI時，VAST廣告錯誤信標有助於主動發現和解決廣告工作流程中的問題。有關詳細信息，請參見<a href="/vod/guides/ad-error-beacons-ssai.html">SSAI的廣告錯誤信標</a>文檔。</p>
</section>
</article>
